<h1>grunt-postcss</h1><p><a href="https://travis-ci.org/nDmitry/grunt-postcss"><img src="https://travis-ci.org/nDmitry/grunt-postcss.png?branch=master" alt="Build Status"></a>
<a href="https://david-dm.org/nDmitry/grunt-postcss"><img src="https://david-dm.org/nDmitry/grunt-postcss.png" alt="Dependency Status"></a></p>
<blockquote>
<p>Apply several post-processors to your CSS using <a href="https://github.com/postcss/postcss">PostCSS</a>.</p>
</blockquote>
<h2>Getting Started</h2><p>This plugin requires Grunt <code>~0.4.0</code></p>
<p>If you haven&#39;t used <a href="http://gruntjs.com/">Grunt</a> before, be sure to check out the <a href="http://gruntjs.com/getting-started">Getting Started</a> guide, as it explains how to create a <a href="http://gruntjs.com/sample-gruntfile">Gruntfile</a> as well as install and use Grunt plugins. Once you&#39;re familiar with that process, you may install this plugin with this command:</p>
<pre><code class="language-shell">npm install grunt-postcss --save-dev
</code></pre>
<p>Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:</p>
<pre><code class="language-js">grunt.loadNpmTasks(&#39;grunt-postcss&#39;);
</code></pre>
<h2>Usage</h2><pre><code>$ npm install grunt-postcss pixrem autoprefixer cssnano
</code></pre><pre><code class="language-js">grunt.initConfig({
  postcss: {
    options: {
      map: true, // inline sourcemaps

      // or
      map: {
          inline: false, // save all sourcemaps as separate files...
          annotation: &#39;dist/css/maps/&#39; // ...to the specified directory
      },

      processors: [
        require(&#39;pixrem&#39;)(), // add fallbacks for rem units
        require(&#39;autoprefixer&#39;)({browsers: &#39;last 2 versions&#39;}), // add vendor prefixes
        require(&#39;cssnano&#39;)() // minify the result
      ]
    },
    dist: {
      src: &#39;css/*.css&#39;
    }
  }
});
</code></pre>
<h2>Options</h2><h3>Post-processors options</h3><pre><code class="language-js">require(&#39;postcss-plugin&#39;)({option: value})
</code></pre>
<h3>Plugin options</h3><h4>options.processors</h4><p>Type: <code>Array</code>
Default value: <code>[]</code></p>
<p>An array of PostCSS compatible post-processors.</p>
<h4>options.map</h4><p>Type: <code>Boolean|Object</code>
Default value: <code>false</code></p>
<p>If the <code>map</code> option isn&#39;t defined or is set to <code>false</code>, PostCSS won&#39;t create or update sourcemaps.</p>
<p>If <code>true</code> is specified, PostCSS will try to locate a sourcemap from a previous compilation step using an annotation comment (e.g. from Sass) and create a new sourcemap based on the found one (or just create a new inlined sourcemap). The created sourcemap can be either a separate file or an inlined map depending on what the previous sourcemap was.</p>
<p>You can gain more control over sourcemap generation by assigning an object to the <code>map</code> option:</p>
<ul>
<li><code>prev</code> (string or <code>false</code>): a path to a directory where a previous sourcemap is (e.g. <code>path/</code>). By default, PostCSS will try to find a previous sourcemap using a path from the annotation comment (or using the annotation comment itself if the map is inlined). You can also set this option to <code>false</code> to delete the previous sourcemap.</li>
<li><code>inline</code> (boolean): whether a sourcemap will be inlined or not. By default, it will be the same as a previous sourcemap or inlined.</li>
<li><code>annotation</code> (boolean or string): by default, PostCSS will always add annotation comments with a path to a sourcemap file unless it is inlined or the input CSS does not have an annotation comment. PostCSS presumes that you want to save sourcemaps next to your output CSS files, but you can override this behavior and set a path to a directory as a string value for the option.</li>
<li><code>sourcesContent</code> (boolean): whether original file contents (e.g. Sass sources) will be included to a sourcemap. By default, it&#39;s <code>true</code> unless a sourcemap from a previous compilation step has the original contents missing.</li>
</ul>
<h4>options.diff</h4><p>Type: <code>Boolean|String</code>
Default value: <code>false</code></p>
<p>Set it to <code>true</code> if you want to get a patch file:</p>
<pre><code class="language-js">options: {
  diff: true // or &#39;custom/path/to/file.css.patch&#39;
}
</code></pre>
<p>You can also specify a path where you want the file to be saved.</p>
<h4>options.failOnError</h4><p>Type: <code>Boolean</code>
Default value: <code>false</code></p>
<p>Set it to <code>true</code> if you want grunt to exit with an error on detecting a warning or error.</p>
<h4>options.writeDest</h4><p>Type: <code>Boolean</code>
Default value: <code>true</code></p>
<p>Set it to <code>false</code> if you do not want the destination files to be written. This does not affect the processing of the <code>map</code> and <code>diff</code> options.</p>
<h4>options.syntax, options.parser, options.stringifier</h4><p>Options to control <a href="https://github.com/postcss/postcss#custom-syntaxes">PostCSS custom syntaxes</a>.</p>
<pre><code class="language-js">options: {
  parser: require(&#39;postcss-safe-parser&#39;) // instead of a removed `safe` option
}
</code></pre>
<pre><code class="language-js">options: {
  syntax: require(&#39;postcss-scss&#39;) // work with SCSS directly
}
</code></pre>
<h2>Why would I use this?</h2><p>Unlike the traditional approach with separate plugins, grunt-postcss allows you to parse and save CSS only once applying all post-processors in memory and thus reducing your build time. PostCSS is also a simple tool for writing your own CSS post-processors.</p>
<h2>How to migrate from grunt-autoprefixer?</h2><p>Autoprefixer is a PostCSS plugin, so first replace <code>grunt-autoprefixer</code> with <code>grunt-postcss</code> and <code>autoprefixer</code> plugin.</p>
<pre><code>$ npm remove --save-dev grunt-autoprefixer
$ npm install --save-dev grunt-postcss autoprefixer
</code></pre><p>Assuming you have a config like this:</p>
<pre><code>autoprefixer: {
  options: {
    map: true,
    browsers: [&#39;last 1 version&#39;]
  },
  dist: {
    src: &#39;...&#39;
  }
}
</code></pre><p>Replace it with:</p>
<pre><code>postcss: {
  options: {
    map: true,
    processors: [
      require(&#39;autoprefixer&#39;)({browsers: [&#39;last 1 version&#39;]})
    ]
  },
  dist: {
    src: &#39;...&#39;
  }
}
</code></pre><p><code>browsers</code>, <code>cascade</code> and <code>remove</code> options are plugin-specific, so we pass them as an argument while require the plugin.</p>
