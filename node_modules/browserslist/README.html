<h1>Browserslist</h1><p><img align="right" width="100" height="100"
     src="http://ai.github.io/browserslist/logo.svg"
     title="Browserslist logo by Anton Lovchikov"></p>
<p>Library to share supported browsers list between different front-end tools.
It is used in:</p>
<ul>
<li><a href="https://github.com/postcss/autoprefixer">Autoprefixer</a></li>
<li><a href="https://github.com/babel/babel-preset-env">babel-preset-env</a> (no config support, only tool option)</li>
<li><a href="https://github.com/amilajack/eslint-plugin-compat">eslint-plugin-compat</a></li>
<li><a href="https://github.com/ismay/stylelint-no-unsupported-browser-features">stylelint-no-unsupported-browser-features</a></li>
<li><a href="https://github.com/jonathantneal/postcss-normalize">postcss-normalize</a></li>
</ul>
<p>All tools that rely on Browserslist will find its config automatically,
when you add the following to <code>package.json</code>:</p>
<pre><code class="language-json">{
  &quot;browserslist&quot;: [
    &quot;&gt; 1%&quot;,
    &quot;last 2 versions&quot;
  ]
}
</code></pre>
<p>Or in <code>.browserslistrc</code> config:</p>
<pre><code class="language-yaml"># Browsers that we support

&gt; 1%
Last 2 versions
IE 10 # sorry
</code></pre>
<p>Developers set browsers list in queries like <code>last 2 version</code>
to be free from updating browser versions manually.
Browserslist will use <a href="http://caniuse.com/">Can I Use</a> data for this queries.</p>
<p>Browserslist will take browsers queries from tool option,
<code>browserslist</code> config, <code>.browserslistrc</code> config,
<code>browserslist</code> section in <code>package.json</code> or environment variables.</p>
<p>You can test Browserslist queries in <a href="http://browserl.ist/">online demo</a>.</p>
<p><a href="https://evilmartians.com/?utm_source=browserslist">
  <img src="https://evilmartians.com/badges/sponsored-by-evil-martians.svg"
    alt="Sponsored by Evil Martians"
    width="236"
    height="54"
  \>
</a></p>
<h2>Queries</h2><p>Browserslist will use browsers query from one of this sources:</p>
<ol>
<li>Tool options. For example <code>browsers</code> option in Autoprefixer.</li>
<li><code>BROWSERSLIST</code> environment variable.</li>
<li><code>browserslist</code> config file in current or parent directories.</li>
<li><code>.browserslistrc</code> config file in current or parent directories.</li>
<li><code>browserslist</code> key in <code>package.json</code> file in current or parent directories.</li>
<li>If the above methods did not produce a valid result
Browserslist will use defaults: <code>&gt; 1%, last 2 versions, Firefox ESR</code>.</li>
</ol>
<p>We recommend to write queries in <code>package.json</code>.</p>
<p>You can specify the versions by queries (case insensitive):</p>
<ul>
<li><code>last 2 versions</code>: the last 2 versions for each browser.</li>
<li><code>last 2 Chrome versions</code>: the last 2 versions of Chrome browser.</li>
<li><code>&gt; 5%</code> or <code>&gt;= 5%</code>: versions selected by global usage statistics.</li>
<li><code>&gt; 5% in US</code>: uses USA usage statistics. It accepts <a href="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">two-letter country code</a>.</li>
<li><code>&gt; 5% in alt-AS</code>: uses Asia region usage statistics. List of all region codes
can be found at <a href="https://github.com/ben-eb/caniuse-lite/tree/master/data/regions"><code>caniuse-lite/data/regions</code></a>.</li>
<li><code>&gt; 5% in my stats</code>: uses <a href="#custom-usage-data">custom usage data</a>.</li>
<li><code>ie 6-8</code>: selects an inclusive range of versions.</li>
<li><code>Firefox &gt; 20</code>: versions of Firefox newer than 20.</li>
<li><code>Firefox &gt;= 20</code>: versions of Firefox newer than or equal to 20.</li>
<li><code>Firefox &lt; 20</code>: versions of Firefox less than 20.</li>
<li><code>Firefox &lt;= 20</code>: versions of Firefox less than or equal to 20.</li>
<li><code>Firefox ESR</code>: the latest [Firefox ESR] version.</li>
<li><code>iOS 7</code>: the iOS browser version 7 directly.</li>
<li><code>not ie &lt;= 8</code>: exclude browsers selected before by previous queries.
You can add <code>not</code> to any query.</li>
</ul>
<p>Browserslist works with separated versions of browsers.
You should avoid queries like <code>Firefox &gt; 0</code>.</p>
<p>Multiple criteria are combined as a boolean <code>OR</code>. A browser version must match
at least one of the criteria to be selected.</p>
<p>All queries are based on the <a href="http://caniuse.com/">Can I Use</a> support table,
e.g. <code>last 3 iOS versions</code> might select <code>8.4, 9.2, 9.3</code> (mixed major and minor),
whereas <code>last 3 Chrome versions</code> might select <code>50, 49, 48</code> (major only).</p>
<h2>Browsers</h2><p>Names are case insensitive:</p>
<ul>
<li><code>Android</code> for Android WebView.</li>
<li><code>BlackBerry</code> or <code>bb</code> for Blackberry browser.</li>
<li><code>Chrome</code> for Google Chrome.</li>
<li><code>ChromeAndroid</code> or <code>and_chr</code> for Chrome for Android</li>
<li><code>Edge</code> for Microsoft Edge.</li>
<li><code>Electron</code> for Electron framework. It will be converted to Chrome version.</li>
<li><code>Explorer</code> or <code>ie</code> for Internet Explorer.</li>
<li><code>ExplorerMobile</code> or <code>ie_mob</code> for Internet Explorer Mobile.</li>
<li><code>Firefox</code> or <code>ff</code> for Mozilla Firefox.</li>
<li><code>FirefoxAndroid</code> or <code>and_ff</code> for Firefox for Android.</li>
<li><code>iOS</code> or <code>ios_saf</code> for iOS Safari.</li>
<li><code>Opera</code> for Opera.</li>
<li><code>OperaMini</code> or <code>op_mini</code> for Opera Mini.</li>
<li><code>OperaMobile</code> or <code>op_mob</code> for Opera Mobile.</li>
<li><code>QQAndroid</code> or <code>and_qq</code> for QQ Browser for Android.</li>
<li><code>Safari</code> for desktop Safari.</li>
<li><code>Samsung</code> for Samsung Internet.</li>
<li><code>UCAndroid</code> or <code>and_uc</code> for UC Browser for Android.</li>
</ul>
<h3>Electron</h3><p><a href="https://www.npmjs.com/package/electron-to-chromium"><code>electron-to-chromium</code></a>
could return a compatible Browserslist query for your (major) Electron version:</p>
<pre><code class="language-js">const e2c = require(&#39;electron-to-chromium&#39;)
autoprefixer({
    browsers: e2c.electronToBrowserList(&#39;1.4&#39;) //=&gt; &quot;Chrome &gt;= 53&quot;
})
</code></pre>
<h2><code>package.json</code></h2><p>If you want to reduce config files in project root, you can specify
browsers in <code>package.json</code> with <code>browserslist</code> key:</p>
<pre><code class="language-js">{
  &quot;private&quot;: true,
  &quot;dependencies&quot;: {
    &quot;autoprefixer&quot;: &quot;^6.5.4&quot;
  },
  &quot;browserslist&quot;: [
    &quot;&gt; 1%&quot;,
    &quot;last 2 versions&quot;
  ]
}
</code></pre>
<h2>Config File</h2><p>Browserslist config should be named <code>.browserslistrc</code> or <code>browserslist</code>
and have browsers queries split by a new line. Comments starts with <code>#</code> symbol:</p>
<pre><code class="language-yaml"># Browsers that we support

&gt; 1%
Last 2 versions
IE 8 # sorry
</code></pre>
<p>Browserslist will check config in every directory in <code>path</code>.
So, if tool process <code>app/styles/main.css</code>, you can put config to root,
<code>app/</code> or <code>app/styles</code>.</p>
<p>You can specify direct path in <code>BROWSERSLIST_CONFIG</code> environment variables.</p>
<h2>Environments</h2><p>You can also specify different browser queries for various environments.
Browserslist will choose query according to <code>BROWSERSLIST_ENV</code> or <code>NODE_ENV</code>
variables. If none of them is declared, Browserslist will firstly look
for <code>development</code> queries and then use defaults.</p>
<p>In <code>package.json</code>:</p>
<pre><code class="language-js">{
  …
  &quot;browserslist&quot;: {
    &quot;production&quot;: [
      &quot;last 2 version&quot;,
      &quot;ie 9&quot;
    ],
    &quot;development&quot;: [
      &quot;last 1 version&quot;
    ]
  }
}
</code></pre>
<p>In <code>.browserslistrc</code> config:</p>
<pre><code class="language-ini">[production]
last 2 version
ie 9

[development]
last 1 version
</code></pre>
<h2>Environment Variables</h2><p>If some tool use Browserslist inside, you can change browsers settings
by <a href="https://en.wikipedia.org/wiki/Environment_variable">environment variables</a>:</p>
<ul>
<li><p><code>BROWSERSLIST</code> with browsers queries.</p>
<pre><code class="language-sh">BROWSERSLIST=&quot;&gt; 5%&quot; gulp css
</code></pre>
</li>
<li><p><code>BROWSERSLIST_CONFIG</code> with path to config file.</p>
<pre><code class="language-sh">BROWSERSLIST_CONFIG=./config/browserslist gulp css
</code></pre>
</li>
<li><p><code>BROWSERSLIST_ENV</code> with environments string.</p>
<pre><code class="language-sh">BROWSERSLIST_ENV=&quot;development&quot; gulp css
</code></pre>
</li>
<li><p><code>BROWSERSLIST_STATS</code> with path to the custom usage data
for <code>&gt; 1% in my stats</code> query.</p>
<pre><code class="language-sh">BROWSERSLIST_STATS=./config/usage_data.json gulp css
</code></pre>
</li>
<li><p><code>BROWSERSLIST_DISABLE_CACHE</code> if you want to disable config reading cache.</p>
<pre><code class="language-sh">BROWSERSLIST_DISABLE_CACHE=1 gulp css
</code></pre>
</li>
</ul>
<h2>Custom Usage Data</h2><p>If you have a website, you can query against the usage statistics of your site:</p>
<ol>
<li>Import your Google Analytics data into <a href="http://caniuse.com/">Can I Use</a>.
Press <code>Import…</code> button in Settings page.</li>
<li><p>Open browser DevTools on <a href="http://caniuse.com/">Can I Use</a> and paste this snippet
into the browser console:</p>
<pre><code class="language-js">var e=document.createElement(&#39;a&#39;);e.setAttribute(&#39;href&#39;, &#39;data:text/plain;charset=utf-8,&#39;+encodeURIComponent(JSON.stringify(JSON.parse(localStorage[&#39;usage-data-by-id&#39;])[localStorage[&#39;config-primary_usage&#39;]])));e.setAttribute(&#39;download&#39;,&#39;stats.json&#39;);document.body.appendChild(e);e.click();document.body.removeChild(e);
</code></pre>
</li>
<li>Save the data to a <code>browserslist-stats.json</code> file in your project.</li>
</ol>
<p>Of course, you can generate usage statistics file by any other method.
File format should be like:</p>
<pre><code class="language-js">{
  &quot;ie&quot;: {
    &quot;6&quot;: 0.01,
    &quot;7&quot;: 0.4,
    &quot;8&quot;: 1.5
  },
  &quot;chrome&quot;: {
    …
  },
  …
}
</code></pre>
<p>Note that you can query against your custom usage data
while also querying against global or regional data.
For example, the query <code>&gt; 1% in my stats, &gt; 5% in US, 10%</code> is permitted.</p>
<h2>JS API</h2><pre><code class="language-js">var browserslist = require(&#39;browserslist&#39;);

// Your CSS/JS build tool code
var process = function (source, opts) {
    var browsers = browserslist(opts.browsers, {
        stats: opts.stats,
        path:  opts.file,
        env:   opts.env
    });
    // Your code to add features for selected browsers
}
</code></pre>
<p>Queries can be a string <code>&quot;&gt; 5%, last 1 version&quot;</code>
or an array <code>[&#39;&gt; 5%&#39;, &#39;last 1 version&#39;]</code>.</p>
<p>If a query is missing, Browserslist will look for a config file.
You can provide a <code>path</code> option (that can be a file) to find the config file
relatively to it.</p>
<p>For non-JS environment and debug purpose you can use CLI tool:</p>
<pre><code class="language-sh">browserslist &quot;&gt; 1%, last 2 versions&quot;
</code></pre>
<h2>Coverage</h2><p>You can get total users coverage for selected browsers by JS API:</p>
<pre><code class="language-js">browserslist.coverage(browserslist(&#39;&gt; 1%&#39;)) //=&gt; 81.4
</code></pre>
<pre><code class="language-js">browserslist.coverage(browserslist(&#39;&gt; 1% in US&#39;), &#39;US&#39;) //=&gt; 83.1
</code></pre>
<p>Or by CLI:</p>
<pre><code class="language-sh">$ browserslist --coverage &quot;&gt; 1%&quot;
These browsers account for 81.4% of all users globally
</code></pre>
<pre><code class="language-sh">$ browserslist --coverage=US &quot;&gt; 1% in US&quot;
These browsers account for 83.1% of all users in the US
</code></pre>
<h2>Internal caches</h2><p>Browserslist caches the configuration it reads from <code>package.json</code> and
<code>browserslist</code> files, as well as knowledge about the existence of files,
for the duration of the hosting process.</p>
<p>To clear these caches, use:</p>
<pre><code class="language-js">browserslist.clearCaches();
</code></pre>
<p>To disable the caching altogether, set the <code>BROWSERSLIST_DISABLE_CACHE</code>
environment variable.</p>
