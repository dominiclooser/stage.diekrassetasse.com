<h1>postcss-calc <a href="https://travis-ci.org/postcss/postcss-calc"><img src="https://travis-ci.org/postcss/postcss-calc.png" alt="Build Status"></a></h1><blockquote>
<p><a href="https://github.com/postcss/postcss">PostCSS</a> plugin to reduce <code>calc()</code>.</p>
</blockquote>
<p>This plugin reduce <code>calc()</code> references whenever it&#39;s possible.
This can be particularly useful with the <a href="https://github.com/postcss/postcss-custom-properties">postcss-custom-properties</a> plugin.</p>
<p><strong>Note:</strong> When multiple units are mixed together in the same expression, the <code>calc()</code> statement is left as is, to fallback to the <a href="http://www.w3.org/TR/css3-values/#calc">w3c calc() feature</a>.</p>
<h2>Installation</h2><pre><code class="language-console">$ npm install postcss-calc
</code></pre>
<h2>Usage</h2><pre><code class="language-js">// dependencies
var fs = require(&quot;fs&quot;)
var postcss = require(&quot;postcss&quot;)
var calc = require(&quot;postcss-calc&quot;)

// css to be processed
var css = fs.readFileSync(&quot;input.css&quot;, &quot;utf8&quot;)

// process css
var output = postcss()
  .use(calc())
  .process(css)
  .css
</code></pre>
<p><strong>Example</strong> (with <a href="https://github.com/postcss/postcss-custom-properties">postcss-custom-properties</a> enabled as well):</p>
<pre><code class="language-js">// dependencies
var fs = require(&quot;fs&quot;)
var postcss = require(&quot;postcss&quot;)
var customProperties = require(&quot;postcss-custom-properties&quot;)
var calc = require(&quot;postcss-calc&quot;)

// css to be processed
var css = fs.readFileSync(&quot;input.css&quot;, &quot;utf8&quot;)

// process css
var output = postcss()
  .use(customProperties())
  .use(calc())
  .process(css)
  .css
</code></pre>
<p>Using this <code>input.css</code>:</p>
<pre><code class="language-css">:root {
  --main-font-size: 16px;
}

body {
  font-size: var(--main-font-size);
}

h1 {
  font-size: calc(var(--main-font-size) * 2);
  height: calc(100px - 2em);
  margin-bottom: calc(
      var(--main-font-size)
      * 1.5
    )
}
</code></pre>
<p>you will get:</p>
<pre><code class="language-css">body {
  font-size: 16px
}

h1 {
  font-size: 32px;
  height: calc(100px - 2em);
  margin-bottom: 24px
}
</code></pre>
<p>Checkout <a href="test">tests</a> for more examples.</p>
<h3>Options</h3><h4><code>precision</code> (default: <code>5</code>)</h4><p>Allow you to define the precision for decimal numbers.</p>
<pre><code class="language-js">var out = postcss()
  .use(calc({precision: 10}))
  .process(css)
  .css
</code></pre>
<h4><code>preserve</code> (default: <code>false</code>)</h4><p>Allow you to preserve calc() usage in output so browsers will handle decimal precision themselves.</p>
<pre><code class="language-js">var out = postcss()
  .use(calc({preserve: true}))
  .process(css)
  .css
</code></pre>
<h4><code>warnWhenCannotResolve</code> (default: <code>false</code>)</h4><p>Adds warnings when calc() are not reduced to a single value.</p>
<pre><code class="language-js">var out = postcss()
  .use(calc({warnWhenCannotResolve: true}))
  .process(css)
  .css
</code></pre>
<h4><code>mediaQueries</code> (default: <code>false</code>)</h4><p>Allows calc() usage as part of media query declarations.</p>
<pre><code class="language-js">var out = postcss()
  .use(calc({mediaQueries: true}))
  .process(css)
  .css
</code></pre>
<h4><code>selectors</code> (default: <code>false</code>)</h4><p>Allows calc() usage as part of selectors.</p>
<pre><code class="language-js">var out = postcss()
  .use(calc({selectors: true}))
  .process(css)
  .css
</code></pre>
<p>Example:</p>
<pre><code class="language-css">div[data-size=&quot;calc(3*3)&quot;] {
  width: 100px;
}
</code></pre>
<hr>
<h2>Contributing</h2><p>Work on a branch, install dev-dependencies, respect coding style &amp; run tests before submitting a bug fix or a feature.</p>
<pre><code class="language-console">$ git clone https://github.com/postcss/postcss-calc.git
$ git checkout -b patch-1
$ npm install
$ npm test
</code></pre>
<h2><a href="CHANGELOG.md">Changelog</a></h2><h2><a href="LICENSE">License</a></h2>